// Messages Component - BEM Structure
// Consolidates messages-common.scss, messages-index.scss, and lead-messages.scss

@import '../variables';
@import '../functions';

// Message Card Component moved to _message-card.scss
// This file contains other message-related components

// =============================================================================
// Message Type Component
// =============================================================================

.message-type {
  display: inline-flex;
  align-items: center;
  gap: $spacing-xs;
  padding: 2px 8px;
  border-radius: $border-radius-sm;
  font-size: 11px;
  font-weight: $font-weight-medium;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  
  &--sms {
    background: rgba($success, 0.1);
    color: $success;
    
    .message-type__icon {
      color: $success;
    }
  }
  
  &--email {
    background: rgba($info, 0.1);
    color: $info;
    
    .message-type__icon {
      color: $info;
    }
  }
  
  &__icon {
    font-size: 12px;
  }
}

// =============================================================================
// Status Badge Component
// =============================================================================

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: $spacing-xs;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: $font-size-sm;
  font-weight: $font-weight-medium;
  
  &--unread {
    @include gradient-bg($primary);
    color: $white;
  }
  
  &--draft {
    @include gradient-bg($warning);
    color: $white;
  }
  
  &--failed {
    @include gradient-bg($danger);
    color: $white;
  }
  
  &--sent {
    @include gradient-bg($success);
    color: $white;
  }
  
  &__icon {
    font-size: 14px;
  }
}

// =============================================================================
// Message Timestamp Component
// =============================================================================

.message-timestamp {
  display: inline-flex;
  align-items: center;
  gap: $spacing-xs;
  color: $gray-500;
  font-size: $font-size-sm;
  
  &__icon {
    font-size: 14px;
  }
}

// =============================================================================
// Message Action Buttons
// =============================================================================

.message-action {
  @include button-reset;
  display: inline-flex;
  align-items: center;
  gap: $spacing-xs;
  padding: $spacing-xs $spacing-sm;
  border-radius: $border-radius-sm;
  font-size: $font-size-sm;
  font-weight: $font-weight-medium;
  transition: all 0.2s ease;
  
  &--primary {
    @include button-variant($primary);
  }
  
  &--secondary {
    background: $gray-100;
    color: $gray-700;
    
    &:hover {
      background: $gray-200;
      color: $gray-900;
    }
  }
  
  &--mark-read {
    background: transparent;
    color: $primary;
    
    &:hover {
      background: rgba($primary, 0.1);
    }
  }
  
  &__icon {
    font-size: 14px;
  }
}

// =============================================================================
// Messages List Component
// =============================================================================

.messages-list {
  background: $white;
  border-radius: $border-radius-lg;
  box-shadow: $shadow-sm;
  overflow: hidden;
  
  &__header {
    padding: $spacing-lg;
    background: linear-gradient(135deg, $primary 0%, darken($primary, 10%) 100%);
    color: $white;
    
    h2 {
      font-size: $font-size-h3;
      font-weight: $font-weight-semi-bold;
      margin-bottom: $spacing-sm;
    }
  }
  
  &__stats {
    display: flex;
    gap: $spacing-xl;
    
    &-item {
      display: flex;
      align-items: center;
      gap: $spacing-sm;
      
      &-label {
        font-size: $font-size-sm;
        opacity: 0.9;
      }
      
      &-value {
        font-size: $font-size-lg;
        font-weight: $font-weight-bold;
      }
    }
  }
  
  &__filters {
    padding: $spacing-md;
    background: $gray-50;
    border-bottom: 1px solid $gray-200;
  }
  
  &__items {
    padding: 0;
    
    .message-card {
      margin-bottom: 0;
      border-radius: 0;
      border-left: none;
      border-right: none;
      border-top: none;
      
      &:hover {
        transform: none;
        box-shadow: none;
        background: $gray-50;
      }
    }
  }
  
  &__empty-state {
    padding: $spacing-2xl;
    text-align: center;
    color: $gray-500;
    
    .glyphicon {
      font-size: 48px;
      margin-bottom: $spacing-md;
      opacity: 0.3;
    }
    
    p {
      font-size: $font-size-lg;
      margin-bottom: $spacing-lg;
    }
  }
  
  &__pagination {
    padding: $spacing-lg;
    border-top: 1px solid $gray-200;
    display: flex;
    justify-content: center;
  }
}

// =============================================================================
// Lead Messages Section
// =============================================================================

.lead-messages {
  margin-top: $spacing-xl;
  
  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: $spacing-lg;
    
    h3 {
      font-size: $font-size-h4;
      font-weight: $font-weight-semi-bold;
      color: $gray-900;
      margin: 0;
    }
  }
  
  &__actions {
    display: flex;
    gap: $spacing-sm;
  }
  
  &__new-button {
    @include button-variant($primary);
    display: inline-flex;
    align-items: center;
    gap: $spacing-xs;
    padding: $spacing-sm $spacing-md;
    
    .glyphicon {
      font-size: 14px;
    }
  }
  
  &__list {
    background: $gray-50;
    border-radius: $border-radius-lg;
    padding: $spacing-md;
    
    .message-card {
      background: $white;
      
      &:last-child {
        margin-bottom: 0;
      }
    }
  }
  
  &__alert {
    @include alert-variant($info, $info);
    margin-bottom: $spacing-md;
    display: flex;
    align-items: center;
    gap: $spacing-sm;
    
    .glyphicon {
      font-size: 18px;
      flex-shrink: 0;
    }
  }
}

// =============================================================================
// Message Filters Component
// =============================================================================

.message-filters {
  display: flex;
  flex-wrap: wrap;
  gap: $spacing-md;
  align-items: center;
  
  &__group {
    display: flex;
    align-items: center;
    gap: $spacing-sm;
    
    &-label {
      font-weight: $font-weight-medium;
      color: $gray-700;
    }
  }
  
  &__toggle {
    display: inline-flex;
    background: $white;
    border: 1px solid $gray-300;
    border-radius: $border-radius-sm;
    overflow: hidden;
    
    label {
      padding: $spacing-xs $spacing-md;
      cursor: pointer;
      transition: all 0.2s ease;
      margin: 0;
      
      &:hover {
        background: $gray-50;
      }
    }
    
    input[type="radio"] {
      display: none;
      
      &:checked + label {
        background: $primary;
        color: $white;
      }
    }
  }
}

// =============================================================================
// Loading States
// =============================================================================

.message-skeleton {
  @keyframes skeleton-pulse {
    0% { opacity: 0.6; }
    50% { opacity: 1; }
    100% { opacity: 0.6; }
  }
  
  .message-card {
    pointer-events: none;
    
    &__avatar,
    &__subject,
    &__body {
      background: $gray-200;
      animation: skeleton-pulse 1.5s ease-in-out infinite;
    }
    
    &__subject {
      width: 60%;
      height: 20px;
      border-radius: $border-radius-sm;
    }
    
    &__body {
      width: 100%;
      height: 32px;
      border-radius: $border-radius-sm;
    }
  }
}

// =============================================================================
// Responsive Adjustments
// =============================================================================

@media (max-width: $screen-sm-max) {
  .message-card {
    &__link {
      flex-direction: column;
    }
    
    &__indicators {
      flex-direction: row;
      width: 100%;
      padding: $spacing-sm;
      border-bottom: 1px solid $gray-200;
    }
    
    &__participants {
      padding: $spacing-sm;
      border-bottom: 1px solid $gray-100;
    }
    
    &__content {
      padding: $spacing-sm;
    }
  }
  
  .messages-list {
    &__stats {
      flex-direction: column;
      gap: $spacing-sm;
    }
  }
  
  .message-filters {
    flex-direction: column;
    align-items: stretch;
    
    &__group {
      flex-direction: column;
      align-items: stretch;
    }
  }
}

// =============================================================================
// Legacy Support (temporary during migration)
// =============================================================================

// Support old message-related classes
.messages-container {
  @extend .messages-list;
}

.message-item {
  @extend .message-card;
}

.message-badge {
  @extend .status-badge;
}

.messages-section {
  @extend .lead-messages;
}