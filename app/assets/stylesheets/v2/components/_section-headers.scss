// Section Header Component Styles
// Based on BlueSky Design System V2

@import '../variables';

// Base section header
.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  background: linear-gradient(135deg, $gray-50 0%, $gray-100 100%);
  border-bottom: 2px solid $gray-200;
  position: relative;
  margin: 0;
  
  // When inside a section, fill to edges
  .section & {
    margin: 0;
    border-radius: 0;
    
    // Only round top corners when it's the first child
    &:first-child {
      border-radius: ($border-radius-md - 1px) ($border-radius-md - 1px) 0 0;
    }
  }
  
  // When inside tasks-section (nested section), fill to edges
  .tasks-section & {
    margin: -1px -1px 0 -1px; // Compensate for parent border
    border-radius: ($border-radius-md - 1px) ($border-radius-md - 1px) 0 0;
  }
  
  // Flat background variant
  &--flat {
    background: $gray-50;
  }
  
  // White background variant
  &--white {
    background: $white;
    border-bottom-color: $gray-100;
  }
  
  // No background variant
  &--minimal {
    background: transparent;
    padding-left: 0;
    padding-right: 0;
    border-bottom: 1px solid $gray-200;
  }
  
  // Colored variants - Only change background, icons stay teal
  &--primary {
    background: linear-gradient(135deg, rgba($primary, 0.05) 0%, rgba($primary, 0.02) 100%);
    border-bottom-color: rgba($primary, 0.2);
  }
  
  &--success {
    background: linear-gradient(135deg, rgba($success, 0.05) 0%, rgba($success, 0.02) 100%);
    border-bottom-color: rgba($success, 0.2);
  }
  
  &--warning {
    background: linear-gradient(135deg, rgba($warning, 0.05) 0%, rgba($warning, 0.02) 100%);
    border-bottom-color: rgba($warning, 0.2);
    
    // Exception: Warning headers use warning-colored icons
    .section-header__icon {
      background: linear-gradient(135deg, darken($warning, 10%) 0%, $warning 100%);
      color: $white;
      box-shadow: 0 3px 8px rgba($warning, 0.3);
    }
    
    // Warning headers also use warning-colored count badges
    .section-header__count {
      background: linear-gradient(135deg, darken($warning, 10%) 0%, $warning 100%);
      color: $white;
      box-shadow: 0 2px 6px rgba($warning, 0.2);
    }
  }
  
  &--danger {
    background: linear-gradient(135deg, rgba($danger, 0.05) 0%, rgba($danger, 0.02) 100%);
    border-bottom-color: rgba($danger, 0.2);
  }
  
  &--info {
    background: linear-gradient(135deg, rgba($brand-teal, 0.05) 0%, rgba($brand-teal, 0.02) 100%);
    border-bottom-color: rgba($brand-teal, 0.2);
  }
  
  // With underline animation
  &--animated {
    &::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(to right, $primary 0%, rgba($primary, 0.2) 100%);
      border-radius: 2px;
    }
  }
}

// Header content wrapper
.section-header__content {
  display: flex;
  align-items: center;
  gap: $spacing-md;
  flex: 1;
}

// Section title
.section-header__title {
  margin: 0;
  font-size: 18px;
  font-weight: $font-weight-semi-bold;
  color: $gray-900;
  display: flex;
  align-items: center;
  gap: $spacing-sm;
  white-space: nowrap; // Prevent wrapping
  
  // Size variants
  &--sm {
    font-size: 16px;
  }
  
  &--lg {
    font-size: 22px;
  }
}

// Icon container - Always teal for consistency
.section-header__icon {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, $brand-teal 0%, darken($brand-teal, 10%) 100%);
  color: $white;
  border-radius: $border-radius-md;
  font-size: 16px;
  box-shadow: 0 3px 8px rgba($brand-teal, 0.2);
  transition: all 0.3s ease;
  flex-shrink: 0;
  
  &:hover {
    transform: translateY(-2px) rotate(5deg);
    box-shadow: 0 5px 12px rgba($brand-teal, 0.3);
  }
  
  .glyphicon {
    color: $white;
  }
}

// Count badge
.section-header__count {
  background: linear-gradient(135deg, $brand-light-blue 0%, $brand-medium-blue 100%);
  color: $white;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: $font-weight-bold;
  box-shadow: 0 2px 6px rgba($brand-medium-blue, 0.2);
}

// Header actions
.section-header__actions {
  display: flex;
  align-items: center;
  gap: $spacing-sm;
}

// Collapsible header
.section-header--collapsible {
  cursor: pointer;
  user-select: none;
  
  .section-header__toggle {
    margin-left: auto;
    transition: transform 0.3s ease;
    
    &.is-collapsed {
      transform: rotate(-90deg);
    }
  }
  
  &:hover {
    background: linear-gradient(135deg, $gray-100 0%, $gray-50 100%);
  }
}

// Section wrapper (contains header + content)
.section {
  background: $white;
  border-radius: $border-radius-lg;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  overflow: hidden;
  border: 1px solid $gray-200;
  margin-bottom: $spacing-xl;
  margin-left: $spacing-md;
  margin-right: $spacing-md;
  
  &:last-child {
    margin-bottom: 0;
  }
  
  // When section follows another element, add top margin
  * + & {
    margin-top: $spacing-xl;
  }
  
  // Special styling for duplicates section
  &#duplicates-section {
    border-color: rgba($warning, 0.3);
    background: rgba($warning, 0.02);
    
    .section-header {
      border-bottom-color: rgba($warning, 0.3);
    }
  }
  
  // Section header is optional - when present, it should fill to edges
  .section-header {
    margin: 0;
    border-radius: 0;
    
    // Only round top corners
    &:first-child {
      border-radius: ($border-radius-lg - 1px) ($border-radius-lg - 1px) 0 0;
    }
  }
  
  // Section content - consistent padding whether header exists or not
  &__content {
    padding: $spacing-xl;
    
    @media (max-width: $screen-sm-max) {
      padding: $spacing-lg;
    }
    
    &--no-padding {
      padding: 0;
    }
    
    &--collapsed {
      display: none;
    }
  }
  
  // Direct content without wrapper (when no header)
  > *:not(.section-header):not(.section__content) {
    padding: $spacing-xl;
    
    @media (max-width: $screen-sm-max) {
      padding: $spacing-lg;
    }
  }
  
  // Lists and special content that should fill to edges
  > .lead-list,
  > .messages-list,
  > .task-list,
  > .empty-state {
    padding: $spacing-xl;
    
    @media (max-width: $screen-sm-max) {
      padding: $spacing-lg;
    }
  }
  
  // Tables should fill to edges
  > table,
  > .table-responsive {
    margin: 0;
  }
  
  // Flat section variant
  &--flat {
    box-shadow: none;
    background: $white;
  }
  
  // Transparent section (no background)
  &--transparent {
    background: transparent;
    box-shadow: none;
    border: none;
  }
  
  // Minimal section (no styling, just spacing)
  &--minimal {
    background: transparent;
    box-shadow: none;
    border: none;
    border-radius: 0;
    
    > * {
      padding: $spacing-lg 0;
    }
  }
  
  // Borderless section
  &--borderless {
    border: none;
  }
  
  // Section with dropdowns (allows overflow for dropdown menus)
  &--with-dropdowns {
    overflow: visible;
  }
  
  // Flush section (no margin)
  &--flush {
    margin-bottom: 0;
    margin-top: 0;
  }
}

// Page header (larger variant)
.page-header {
  padding: $spacing-xl 0;
  margin-bottom: $spacing-xl;
  
  &__title {
    font-size: 32px;
    font-weight: $font-weight-bold;
    color: $gray-900;
    margin: 0 0 $spacing-sm 0;
  }
  
  &__subtitle {
    font-size: $font-size-lg;
    color: $gray-600;
    margin: 0;
  }
  
  &__actions {
    margin-top: $spacing-lg;
    display: flex;
    gap: $spacing-sm;
    flex-wrap: wrap;
  }
  
  // With background
  &--hero {
    background: linear-gradient(135deg, $primary 0%, darken($primary, 15%) 100%);
    color: $white;
    padding: $spacing-2xl 0;
    margin-left: -$spacing-xl;
    margin-right: -$spacing-xl;
    margin-top: -$spacing-xl;
    padding-left: $spacing-xl;
    padding-right: $spacing-xl;
    
    .page-header__title,
    .page-header__subtitle {
      color: $white;
    }
    
    .page-header__subtitle {
      opacity: 0.9;
    }
  }
}

// Responsive adjustments
@media (max-width: 767px) {
  .section-header {
    flex-wrap: wrap;
    gap: $spacing-sm;
    padding: $spacing-md;
    
    &--minimal {
      padding-left: 0;
      padding-right: 0;
    }
  }
  
  .section-header__content {
    width: 100%;
  }
  
  .section-header__actions {
    width: 100%;
    justify-content: flex-end;
  }
  
  .section-header__title {
    font-size: 18px;
    
    &--sm {
      font-size: 16px;
    }
    
    &--lg {
      font-size: 20px;
    }
  }
  
  .section__content {
    padding: $spacing-md;
  }
  
  .page-header {
    padding: $spacing-lg 0;
    
    &__title {
      font-size: 24px;
    }
    
    &__subtitle {
      font-size: $font-size-base;
    }
    
    &--hero {
      margin-left: -$spacing-md;
      margin-right: -$spacing-md;
      padding-left: $spacing-md;
      padding-right: $spacing-md;
    }
  }
}