<% if GOOGLE_ANALYTICS_TRACKING_ID.present? %>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=<%= GOOGLE_ANALYTICS_TRACKING_ID %>"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config',
         '<%= GOOGLE_ANALYTICS_TRACKING_ID %>',
         {'custom_map':
           {'dimension1': 'property'}
         }
    );
    var dimensionValue = '<%= current_user.property&.name || "Unknown" rescue "Unknown" %>';
    gtag('event', 'property_dimension', dimensionValue);
  </script>
<% else %>
  <!-- GOOGLE_ANAYLTICS_TRACKING_ID is not set -->
<% end %>
