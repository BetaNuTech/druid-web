<% if policy(Property).select_current? %>
  <div id="header-property-selector">
    <%= form_tag(select_current_properties_path, method: :post, remote: false, id: 'propertyselection--form', class: 'form-inline') do %>
      <%= select_tag :property_id, property_options_for_current(@current_property&.id), id: 'propertyselection--selector', class: "form-control form-control-sm", prompt: '-- Select One --', allow_blank: false %>
    <% end %>
  </div>
  <script type='text/javascript'>
    document.getElementById('propertyselection--selector').
      addEventListener('change', function(e){ 
        var val = e.target.options[e.target.selectedIndex].text
        if (val != '-- Select One --')  { 
          $('#propertyselection--form').submit()
        }
      });
      /*
    document.getElementById('header-property-selection-toggle').
      addEventListener('mouseup', function(e){
        e.preventDefault();
        var selector = document.getElementById('propertyselection--selector')
        if (selector.style.display == "none") {
          selector.style.display = "block"
        } else {
          selector.style.display = "none"
        } 
      });
      */
  </script>
<% end %>
