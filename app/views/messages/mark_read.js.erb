// Remove the unread class from the message card
$("#message-<%= @message.id %>").removeClass('message-card--unread');

// Hide the "Mark as Read" button
$("#message-read-button-<%= @message.id %>").hide();

// Update the unread badge count in the sidebar if it exists (only for messages)
// Find the Messages sidebar item by looking for the text content
var $messagesBadge = $('.sidebar--item .sidebar--item-content:contains("Messages")').closest('.sidebar--item').find('.sidebar--item-alert').first();
if ($messagesBadge.length) {
  var currentCount = parseInt($messagesBadge.text().trim(), 10);
  if (!isNaN(currentCount) && currentCount > 0) {
    var newCount = currentCount - 1;
    if (newCount > 0) {
      $messagesBadge.text(newCount);
    } else {
      $messagesBadge.hide();
    }
  }
}

console.log('Mark as read executed for message <%= @message.id %>');
